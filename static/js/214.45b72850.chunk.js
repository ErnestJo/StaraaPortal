"use strict";(self.webpackChunkSaloon_Portal=self.webpackChunkSaloon_Portal||[]).push([[214],{58214:function(e,t,r){r.r(t),r.d(t,{default:function(){return D}});var a=r(1413),n=r(4942),o=r(70885),l=r(72791),s=r(9592),i=r(13855),c=r(89743),d=r(2677),u=r(16157),p=r(2144),f=r(45736),j=r(74569),h=r.n(j),m=r(80184);var x=function(){var e=(0,l.useState)([]),t=(0,o.Z)(e,2),r=(t[0],t[1],(0,l.useState)([])),a=(0,o.Z)(r,2),n=(a[0],a[1]);return(0,l.useEffect)((function(){h()({method:"GET",url:"/api/get_client"}).then((function(e){console.log(e),n(e)})).catch((function(e){console.log(e)}))}),[]),(0,m.jsx)("div",{children:(0,m.jsx)(i.Z,{children:(0,m.jsxs)(c.Z,{children:[(0,m.jsx)(d.Z,{md:6,children:(0,m.jsxs)(i.Z.Group,{className:"mb-3",controlId:"formBasicEmail",children:[(0,m.jsx)(i.Z.Label,{children:"Project Name"}),(0,m.jsx)(i.Z.Control,{type:"email",placeholder:"Enter email"})]})}),(0,m.jsxs)(d.Z,{md:6,children:[(0,m.jsx)(i.Z.Label,{children:"Project Status"}),(0,m.jsxs)(i.Z.Select,{"aria-label":"Default select example",children:[(0,m.jsx)("option",{children:"Open this select menu"}),(0,m.jsx)("option",{value:"1",children:"One"}),(0,m.jsx)("option",{value:"2",children:"Two"}),(0,m.jsx)("option",{value:"3",children:"Three"})]})]}),(0,m.jsx)(d.Z,{md:6,children:(0,m.jsxs)(i.Z.Group,{className:"mb-3",controlId:"formBasicEmail",children:[(0,m.jsx)(i.Z.Label,{children:"Start date"}),(0,m.jsx)(i.Z.Control,{type:"date",placeholder:"Enter email"})]})}),(0,m.jsx)(d.Z,{md:6,children:(0,m.jsxs)(i.Z.Group,{className:"mb-3",controlId:"formBasicEmail",children:[(0,m.jsx)(i.Z.Label,{children:"End date"}),(0,m.jsx)(i.Z.Control,{type:"date",placeholder:"Enter email"})]})}),(0,m.jsxs)(d.Z,{md:6,children:[" ",(0,m.jsx)(i.Z.Label,{children:"Project Status"}),(0,m.jsxs)(i.Z.Select,{"aria-label":"Default select example",children:[(0,m.jsx)("option",{children:"Open this select menu"}),(0,m.jsx)("option",{value:"1",children:"One"}),(0,m.jsx)("option",{value:"2",children:"Two"}),(0,m.jsx)("option",{value:"3",children:"Three"})]})]})]})})})},Z=r(61134),v=(r(30577),r(25415),r(31418),r(64802),r(30274)),g=r(52007),y=r.n(g),b=["color","size"];function S(){return S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},S.apply(this,arguments)}function w(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var _=(0,l.forwardRef)((function(e,t){var r=e.color,a=e.size,n=w(e,b);return l.createElement("svg",S({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:a,height:a,fill:r},n),l.createElement("path",{d:"M6.5 5A1.5 1.5 0 0 0 5 6.5v3A1.5 1.5 0 0 0 6.5 11h3A1.5 1.5 0 0 0 11 9.5v-3A1.5 1.5 0 0 0 9.5 5h-3z"}),l.createElement("path",{d:"M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm15 0a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4z"}))}));_.propTypes={color:y().string,size:y().oneOfType([y().string,y().number])},_.defaultProps={color:"currentColor",size:"1em"};var E=_,P=r(72559),C=r(61265),O=r(65057),T=r(50649),N=r.n(T),F="/api/update_project_status",I=O.Ry().shape({project_name:O.Z_().required(),project_status:O.Rx().required(),start_date:O.hT().required(),end_date:O.hT().required(),client:O.Rx().required()});function z(e){var t=(0,l.useState)([]),r=(0,o.Z)(t,2),p=r[0],f=r[1],j=(0,l.useState)([]),x=(0,o.Z)(j,2),g=x[0],y=x[1],b=(0,l.useState)([]),S=(0,o.Z)(b,2),w=S[0],_=S[1];(0,l.useRef)();l.useEffect((function(){}),[]);var E=(0,Z.cI)({mode:"onChange",resolver:(0,C.X)(I)}),P=E.register,O=(E.errors,E.handleSubmit),T=(E.watch,E.reset),N=(0,l.useState)(""),F=(0,o.Z)(N,2),z=(F[0],F[1],(0,l.useState)(!1)),D=(0,o.Z)(z,2),B=(D[0],D[1]);return(0,l.useEffect)((function(){h()({method:"GET",url:"/api/get_client"}).then((function(e){console.log(e.data[0].data),y(e.data[0].data),console.log(y)})).catch((function(e){console.log(e)}))}),[]),(0,l.useEffect)((function(){h()({method:"GET",url:"/api/get_project_status"}).then((function(e){console.log(e.data[0].data),f(e.data[0].data),console.log(y)})).catch((function(e){console.log(e)}))}),[]),(0,l.useEffect)((function(){h()({method:"GET",url:"/api/get_staff"}).then((function(e){console.log(e.data[0].data),_(e.data[0].data)})).catch((function(e){console.log(e)}))}),[]),(0,m.jsxs)(s.Z,(0,a.Z)((0,a.Z)({},e),{},{size:"lg","aria-labelledby":"contained-modal",centered:!0,children:[(0,m.jsx)(s.Z.Header,{closeButton:!0,children:(0,m.jsx)(s.Z.Title,{id:"contained-modal",children:e.title})}),(0,m.jsx)(s.Z.Body,{children:(0,m.jsxs)(i.Z,{onSubmit:O((function(t){try{var r,a=(r={project_name:t.project_name,project_status:parseInt(t.project_status),start_date:t.start_date,end_date:t.end_date},(0,n.Z)(r,"end_date",t.end_date),(0,n.Z)(r,"client",parseInt(t.client)),(0,n.Z)(r,"product_owner",parseInt(t.product_owner)),r);console.log(a),h().post("/api/add_project",a,{headers:{"content-Type":"application/json"}}).then((function(t){T(),console.log(t.data[0].data[0]),(t.data[0].data[0].code=111)?(e.reloadPage(),e.onHide(),v.Z.notifySuccess("Project was added Succefully")):v.Z.notifyError("failed to add new project")})),B(!0)}catch(o){}})),children:[(0,m.jsxs)(c.Z,{children:[(0,m.jsx)(d.Z,{md:6,children:(0,m.jsxs)(i.Z.Group,{className:"mb-3",controlId:"formBasicEmail",children:[(0,m.jsx)(i.Z.Label,{children:"Project Name"}),(0,m.jsx)(i.Z.Control,(0,a.Z)((0,a.Z)({type:"text",placeholder:"Enter Name",name:"project_name"},P("project_name")),{},{required:!0}))]})}),(0,m.jsxs)(d.Z,{md:6,children:[(0,m.jsx)(i.Z.Label,{children:"Project Client"}),(0,m.jsxs)(i.Z.Select,(0,a.Z)((0,a.Z)({"aria-label":"Default select example"},P("client")),{},{children:[(0,m.jsx)("option",{value:"",children:"Project Client"}),g.length>0&&g.map((function(e){return(0,m.jsxs)("option",{value:e.client_id,children:[e.client_name," "]},e.client_id)}))]}))]}),(0,m.jsx)(d.Z,{md:6,children:(0,m.jsxs)(i.Z.Group,{className:"mb-3",controlId:"formBasicEmail",children:[(0,m.jsx)(i.Z.Label,{children:"Start date"}),(0,m.jsx)(i.Z.Control,(0,a.Z)((0,a.Z)({type:"date",placeholder:"Enter Start Date",name:"start_date"},P("start_date")),{},{required:!0}))]})}),(0,m.jsx)(d.Z,{md:6,children:(0,m.jsxs)(i.Z.Group,{className:"mb-3",controlId:"formBasicEmail",children:[(0,m.jsx)(i.Z.Label,{children:"End date"}),(0,m.jsx)(i.Z.Control,(0,a.Z)((0,a.Z)({type:"date",placeholder:"Enter End Date",autoComplete:"off",name:"end_date"},P("end_date")),{},{required:!0}))]})}),(0,m.jsxs)(d.Z,{md:6,children:[(0,m.jsx)(i.Z.Label,{children:"Project Status"}),(0,m.jsxs)(i.Z.Select,(0,a.Z)((0,a.Z)({id:"disabledSelect","aria-label":"Default select status"},P("project_status")),{},{required:!0,children:[(0,m.jsx)("option",{value:"",children:" Project status"}),p.length>0&&p.map((function(e){return(0,m.jsxs)("option",{value:e.projectId,children:[e.projectStatus," "]},e.projectId)}))]}))]}),(0,m.jsxs)(d.Z,{md:6,children:[(0,m.jsx)(i.Z.Label,{children:"Product owner"}),(0,m.jsxs)(i.Z.Select,(0,a.Z)((0,a.Z)({"aria-label":"Default select example"},P("product_owner")),{},{children:[(0,m.jsx)("option",{children:"Choose PO"}),w.length>0&&w.map((function(e){return(0,m.jsx)("option",{value:e.staff_id,children:e.staff},e.staff_id)}))]}))]})]}),(0,m.jsxs)(d.Z,{md:12,className:"mt-2",children:[(0,m.jsx)(u.Z,{onClick:e.onHide,children:"Close"}),(0,m.jsx)(u.Z,{className:"float-end",type:"submit",children:e.title})]})]})})]}))}z.defaultProps={title:"Add Project"};var D=function(){var e=l.useState(!1),t=(0,o.Z)(e,2),r=t[0],a=t[1],n=(0,l.useState)([]),s=(0,o.Z)(n,2),i=s[0],c=s[1],d=(0,l.useState)({data:[],showFilterRow:!0,showHeaderFilter:!0,currentFilter:"auto",startDate:new Date,endDate:new Date}),j=(0,o.Z)(d,2),Z=j[0];j[1];(0,l.useEffect)((function(){g()}),[]);var g=function(){h()({method:"GET",url:"/api/get_project"}).then((function(e){console.log(e.data[0].data),c(e.data[0].data)})).catch((function(e){console.log(e)}))};return(0,m.jsxs)("div",{children:[(0,m.jsxs)(p.Z,{children:[(0,m.jsx)(p.Z.Header,{children:(0,m.jsx)(u.Z,{className:"primary",onClick:function(){return a(!0)},children:"Add Project"})}),(0,m.jsx)(p.Z.Body,{children:(0,m.jsxs)(N(),{ref:function(e){return e},dataSource:i,showRowLines:!0,showBorders:!0,children:[(0,m.jsx)(T.Column,{dataField:"project",caption:"Projects"}),(0,m.jsx)(T.Column,{dataField:"client",caption:"Clients"}),(0,m.jsx)(T.Column,{dataField:"po",caption:"Product Owner"}),(0,m.jsx)(T.Column,{dataField:"startdate",caption:"Start Date"}),(0,m.jsx)(T.Column,{dataField:"enddate",caption:"End Date"}),(0,m.jsx)(T.Column,{dataField:"projectstatus",caption:"Project Status",allowFiltering:!1,cellRender:function(e){return"Stopped"==e.data.projectstatus?(0,m.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,m.jsx)(f.Z,{bg:"danger",children:e.data.projectstatus})}):"On Going"==e.data.projectstatus?(0,m.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,m.jsx)(f.Z,{bg:"primary",children:e.data.projectstatus})}):"New"==e.data.projectstatus?(0,m.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,m.jsx)(f.Z,{bg:"success",children:e.data.projectstatus})}):void 0}}),(0,m.jsx)(T.Column,{dataField:"project_id",caption:"Actions",allowFiltering:!1,cellRender:function(e){return(0,m.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[(0,m.jsx)(u.Z,{variant:"success",onClick:function(){if(console.log(e.data),"On Going"!=e.data.projectstatus){var t={project_id:e.data.project_id,project_status:1};console.log(t),h().post(F,t,{headers:{"content-Type":"application/json"}}).then((function(e){console.log(e.data[0].data[0]),(e.data[0].data[0].code=111)?(g(),v.Z.notifySuccess("Project Started added Succefully")):v.Z.notifyError("This project failed Stopped")}))}else v.Z.notifyError("This project is on progress, It can not be started")},className:"mx-1",children:(0,m.jsx)(P.Z,{})}),(0,m.jsx)(u.Z,{variant:"danger",onClick:function(){if(console.log(e.data),"Stopped"!=e.data.projectstatus){var t={project_id:e.data.project_id,project_status:2};console.log(t),h().post(F,t,{headers:{"content-Type":"application/json"}}).then((function(e){console.log(e.data[0].data[0]),(e.data[0].data[0].code=111)?(g(),v.Z.notifySuccess("Project Stopped")):v.Z.notifyError("This project failed Stopped")}))}else v.Z.notifyError("This project is Stopped It can not be stopped")},className:"mx-1",children:(0,m.jsx)(E,{})})]})}})," ",(0,m.jsx)(T.ColumnChooser,{enabled:!0}),(0,m.jsx)(T.Selection,{mode:"multiple"}),(0,m.jsx)(T.Export,{enabled:!0,fileName:"Projects",allowExportSelectedData:!0}),(0,m.jsx)(T.Paging,{defaultPageSize:5}),(0,m.jsx)(T.FilterRow,{visible:Z.showFilterRow,applyFilter:Z.currentFilter}),(0,m.jsx)(T.HeaderFilter,{visible:Z.showHeaderFilter}),(0,m.jsx)(T.Selection,{mode:"single"}),(0,m.jsx)(T.SearchPanel,{visible:!0,width:240,placeholder:"Search..."}),(0,m.jsx)(T.Summary,{children:(0,m.jsx)(T.TotalItem,{column:"id_no",summaryType:"count"})})]})})]}),(0,m.jsx)(z,{show:r,reloadPage:g,onHide:function(){return a(!1)},children:(0,m.jsx)(x,{})})]})}},61265:function(e,t,r){r.d(t,{X:function(){return s}});var a=r(61134),n=function(e,t,r){if(e&&"reportValidity"in e){var n=(0,a.U2)(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},o=function(e,t){var r=function(r){var a=t.fields[r];a&&a.ref&&"reportValidity"in a.ref?n(a.ref,r,e):a.refs&&a.refs.forEach((function(t){return n(t,r,e)}))};for(var a in t.fields)r(a)},l=function(e,t){t.shouldUseNativeValidation&&o(e,t);var r={};for(var n in e){var l=(0,a.U2)(t.fields,n);(0,a.t8)(r,n,Object.assign(e[n],{ref:l&&l.ref}))}return r},s=function(e,t,r){return void 0===t&&(t={}),void 0===r&&(r={}),function(s,i,c){try{return Promise.resolve(function(a,l){try{var d=(t.context,Promise.resolve(e["sync"===r.mode?"validateSync":"validate"](s,Object.assign({abortEarly:!1},t,{context:i}))).then((function(e){return c.shouldUseNativeValidation&&o({},c),{values:r.rawValues?s:e,errors:{}}})))}catch(n){return l(n)}return d&&d.then?d.then(void 0,l):d}(0,(function(e){if(!e.inner)throw e;return{values:{},errors:l((t=e,r=!c.shouldUseNativeValidation&&"all"===c.criteriaMode,(t.inner||[]).reduce((function(e,t){if(e[t.path]||(e[t.path]={message:t.message,type:t.type}),r){var n=e[t.path].types,o=n&&n[t.type];e[t.path]=(0,a.KN)(t.path,r,e,t.type,o?[].concat(o,t.message):t.message)}return e}),{})),c)};var t,r})))}catch(n){return Promise.reject(n)}}}},72559:function(e,t,r){var a=r(72791),n=r(52007),o=r.n(n),l=["color","size"];function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},s.apply(this,arguments)}function i(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var c=(0,a.forwardRef)((function(e,t){var r=e.color,n=e.size,o=i(e,l);return a.createElement("svg",s({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:n,height:n,fill:r},o),a.createElement("path",{d:"M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"}))}));c.propTypes={color:o().string,size:o().oneOfType([o().string,o().number])},c.defaultProps={color:"currentColor",size:"1em"},t.Z=c},45736:function(e,t,r){var a=r(1413),n=r(45987),o=r(81694),l=r.n(o),s=r(72791),i=r(10162),c=r(80184),d=["bsPrefix","bg","pill","text","className","as"],u=s.forwardRef((function(e,t){var r=e.bsPrefix,o=e.bg,s=e.pill,u=e.text,p=e.className,f=e.as,j=void 0===f?"span":f,h=(0,n.Z)(e,d),m=(0,i.vE)(r,"badge");return(0,c.jsx)(j,(0,a.Z)((0,a.Z)({ref:t},h),{},{className:l()(p,m,s&&"rounded-pill",u&&"text-".concat(u),o&&"bg-".concat(o))}))}));u.displayName="Badge",u.defaultProps={bg:"primary",pill:!1},t.Z=u}}]);
//# sourceMappingURL=214.45b72850.chunk.js.map