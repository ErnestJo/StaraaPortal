"use strict";(self.webpackChunkSaloon_Portal=self.webpackChunkSaloon_Portal||[]).push([[383],{66383:function(e,t,a){a.r(t),a.d(t,{default:function(){return E}});var r=a(1413),n=a(70885),s=a(72791),o=a(74569),l=a.n(o),i=a(9592),c=a(13855),d=a(89743),u=a(2677),p=a(16157),f=a(2144),h=a(45736),j=a(61134),m=(a(25415),a(31418),a(64802),a(30274)),x=a(52007),g=a.n(x),Z=["color","size"];function y(){return y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},y.apply(this,arguments)}function _(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var b=(0,s.forwardRef)((function(e,t){var a=e.color,r=e.size,n=_(e,Z);return s.createElement("svg",y({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:r,height:r,fill:a},n),s.createElement("path",{fillRule:"evenodd",d:"M1 11.5a.5.5 0 0 0 .5.5h11.793l-3.147 3.146a.5.5 0 0 0 .708.708l4-4a.5.5 0 0 0 0-.708l-4-4a.5.5 0 0 0-.708.708L13.293 11H1.5a.5.5 0 0 0-.5.5zm14-7a.5.5 0 0 1-.5.5H2.707l3.147 3.146a.5.5 0 1 1-.708.708l-4-4a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 4H14.5a.5.5 0 0 1 .5.5z"}))}));b.propTypes={color:g().string,size:g().oneOfType([g().string,g().number])},b.defaultProps={color:"currentColor",size:"1em"};var q=b,v=a(72559),w=(a(65057),a(50649)),S=a.n(w),R=a(80184),C="/api/update_properties_req_status";function P(e){var t=(0,s.useState)([]),a=(0,n.Z)(t,2),o=a[0],f=a[1],h=(0,s.useState)([]),x=(0,n.Z)(h,2),g=x[0],Z=x[1],y=(0,s.useState)([]),_=(0,n.Z)(y,2),b=_[0],q=_[1],v=(0,s.useState)([]),w=(0,n.Z)(v,2),S=w[0],C=w[1];(0,s.useRef)();s.useEffect((function(){}),[]);var P=(0,j.cI)({mode:"onChange"}),E=P.register,O=(P.errors,P.handleSubmit),N=(P.watch,P.reset),F=(0,s.useState)(""),T=(0,n.Z)(F,2),z=(T[0],T[1],(0,s.useState)(!1)),I=(0,n.Z)(z,2),k=(I[0],I[1]);return(0,s.useEffect)((function(){l()({method:"GET",url:"/api/get_project"}).then((function(e){console.log(e.data[0].data),f(e.data[0].data)})).catch((function(e){console.log(e)}))}),[]),(0,s.useEffect)((function(){l()({method:"GET",url:"/api/get_staff"}).then((function(e){console.log(e.data[0].data),Z(e.data[0].data)})).catch((function(e){console.log(e)}))}),[]),(0,s.useEffect)((function(){l()({method:"GET",url:"/api/get_properties"}).then((function(e){console.log(e.data[0].data),C(e.data[0].data)})).catch((function(e){console.log(e)}))}),[]),(0,s.useEffect)((function(){l()({method:"GET",url:"/api/get_request_status"}).then((function(e){console.log(e.data[0].data),q(e.data[0].data)})).catch((function(e){console.log(e)}))}),[]),(0,R.jsxs)(i.Z,(0,r.Z)((0,r.Z)({},e),{},{size:"lg","aria-labelledby":"contained-modal",centered:!0,children:[(0,R.jsx)(i.Z.Header,{closeButton:!0,children:(0,R.jsx)(i.Z.Title,{id:"contained-modal",children:e.title})}),(0,R.jsx)(i.Z.Body,{children:(0,R.jsxs)(c.Z,{onSubmit:O((function(t){try{var a={req_name:t.req_name,req_date:t.req_date,request_status:parseInt(t.request_status),staff:parseInt(t.staff),propertiy:parseInt(t.propertiy),project:parseInt(t.project)};console.log(a),l().post("/api/add_properties_req",a,{headers:{"content-Type":"application/json"}}).then((function(t){N(),console.log(t.data[0].data[0]),(t.data[0].data[0].code=111)?(e.onHide(),m.Z.notifySuccess("Request was added Made"),e.reloadPage()):m.Z.notifyError("failed to add new Request")})),k(!0)}catch(r){}})),children:[(0,R.jsxs)(d.Z,{children:[(0,R.jsx)(u.Z,{md:6,children:(0,R.jsxs)(c.Z.Group,{className:"mb-3",controlId:"formBasicEmail",children:[(0,R.jsx)(c.Z.Label,{children:"Request Name"}),(0,R.jsx)(c.Z.Control,(0,r.Z)({type:"text",placeholder:"Enter Request Name",name:"req_name"},E("req_name")))]})}),(0,R.jsxs)(u.Z,{md:6,children:[(0,R.jsx)(c.Z.Label,{children:"Property/Item"}),(0,R.jsxs)(c.Z.Select,(0,r.Z)((0,r.Z)({"aria-label":"Default select"},E("propertiy")),{},{children:[(0,R.jsx)("option",{children:"Choose Item"}),S.length>0&&S.map((function(e){return(0,R.jsx)("option",{value:e.properties_id,children:e.properties_name},e.properties_id)}))]}))]}),(0,R.jsxs)(u.Z,{md:6,children:[(0,R.jsx)(c.Z.Label,{children:"For Project"}),(0,R.jsxs)(c.Z.Select,(0,r.Z)((0,r.Z)({"aria-label":"Default select example"},E("project")),{},{children:[(0,R.jsx)("option",{children:"Choose Project"}),o.length>0&&o.map((function(e){return(0,R.jsx)("option",{value:e.project_id,children:e.project},e.project_id)}))]}))]}),(0,R.jsxs)(u.Z,{md:6,children:[(0,R.jsx)(c.Z.Label,{children:"Staff"}),(0,R.jsxs)(c.Z.Select,(0,r.Z)((0,r.Z)({"aria-label":"Default select example"},E("staff")),{},{children:[(0,R.jsx)("option",{children:"Choose staff"}),g.length>0&&g.map((function(e){return(0,R.jsx)("option",{value:e.staff_id,children:e.staff},e.staff_id)}))]}))]}),(0,R.jsxs)(u.Z,{md:6,children:[(0,R.jsx)(c.Z.Label,{children:"Request Status"}),(0,R.jsxs)(c.Z.Select,(0,r.Z)((0,r.Z)({"aria-label":"Default select example"},E("request_status")),{},{children:[(0,R.jsx)("option",{children:"Request status options"}),b.length>0&&b.map((function(e){return(0,R.jsx)("option",{value:e.request_status_id,children:e.request_status_name},e.request_status_id)}))]}))]}),(0,R.jsx)(u.Z,{md:6,children:(0,R.jsxs)(c.Z.Group,{className:"mb-3",controlId:"formBasicEmail",children:[(0,R.jsx)(c.Z.Label,{children:"Req date"}),(0,R.jsx)(c.Z.Control,(0,r.Z)({type:"date",placeholder:"Enter Request date"},E("req_date")))]})})]}),(0,R.jsxs)(u.Z,{md:12,className:"mt-2",children:[(0,R.jsx)(p.Z,{onClick:e.onHide,children:"Close"}),(0,R.jsx)(p.Z,{className:"float-end",type:"submit",children:e.title})]})]})})]}))}P.defaultProps={title:"Add Properties Request"};var E=function(){var e=s.useState(!1),t=(0,n.Z)(e,2),a=t[0],r=t[1],o=(0,s.useState)([]),i=(0,n.Z)(o,2),c=i[0],d=i[1],u=(0,s.useState)({data:[],showFilterRow:!0,showHeaderFilter:!0,currentFilter:"auto",startDate:new Date,endDate:new Date}),j=(0,n.Z)(u,2),x=j[0];j[1];(0,s.useEffect)((function(){g()}),[]);var g=function(){l()({method:"GET",url:"/api/get_properties_request"}).then((function(e){console.log(e.data[0].data),d(e.data[0].data)})).catch((function(e){console.log(e)}))};return(0,R.jsxs)("div",{children:[(0,R.jsxs)(f.Z,{children:[(0,R.jsx)(f.Z.Header,{children:(0,R.jsx)(p.Z,{className:"primary",onClick:function(){return r(!0)},children:"Add Properties Request"})}),(0,R.jsx)(f.Z.Body,{children:(0,R.jsxs)(S(),{ref:function(e){return e},dataSource:c.filter((function(e){return e.request_status.includes("Pending","Not Returned")||e.request_status.includes("Not Redurned")})),showRowLines:!0,showBorders:!0,children:[(0,R.jsx)(w.Column,{dataField:"project_name",caption:"Project Name"}),(0,R.jsx)(w.Column,{dataField:"req_name",caption:"request Name"}),(0,R.jsx)(w.Column,{dataField:"staff",caption:"Staff Name"}),(0,R.jsx)(w.Column,{dataField:"po",caption:"product Owner"}),(0,R.jsx)(w.Column,{dataField:"properties_name",caption:"Item Name"}),(0,R.jsx)(w.Column,{dataField:"req_date",caption:"Request Date"}),(0,R.jsx)(w.Column,{dataField:"request_status",caption:"Request status",allowFiltering:!1,cellRender:function(e){return"Approved"==e.data.request_status?(0,R.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,R.jsx)(h.Z,{pill:!0,bg:"success",children:e.data.request_status})}):"Pending"==e.data.request_status?(0,R.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,R.jsx)(h.Z,{pill:!0,bg:"secondary",children:e.data.request_status})}):"Rejected"==e.data.request_status||"Not Redurned"==e.data.request_status?(0,R.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,R.jsx)(h.Z,{pill:!0,bg:"danger",children:e.data.request_status})}):"Returned"==e.data.request_status?(0,R.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,R.jsx)(h.Z,{pill:!0,bg:"success",children:e.data.request_status})}):void 0}}),(0,R.jsx)(w.Column,{dataField:"properties_req_id",caption:"Actions",allowFiltering:!1,cellRender:function(e){return(0,R.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[(0,R.jsx)(p.Z,{variant:"success",className:"mx-1",onClick:function(){if(console.log(e.data.request_status),"Pending"==e.data.request_status){var t={properties_req_id:e.data.properties_req_id,request_status:5};console.log(t),l().post(C,t,{headers:{"content-Type":"application/json"}}).then((function(e){console.log(e.data[0].data[0]),(e.data[0].data[0].code=111)?(g(),m.Z.notifySuccess("Property is Booked")):m.Z.notifyError("Property was not able to book")}))}},children:(0,R.jsx)(v.Z,{})}),(0,R.jsx)(p.Z,{variant:"danger",onClick:function(){if(console.log(e.data.request_status),"Not Redurned"==e.data.request_status){var t={properties_req_id:e.data.properties_req_id,request_status:4};console.log(t),l().post(C,t,{headers:{"content-Type":"application/json"}}).then((function(e){console.log(e.data[0].data[0]),(e.data[0].data[0].code=111)?(g(),m.Z.notifySuccess("Returned added Succefully")):m.Z.notifyError("Returned was not done")}))}},className:"mx-1",children:(0,R.jsx)(q,{})})]})}}),(0,R.jsx)(w.ColumnChooser,{enabled:!0}),(0,R.jsx)(w.Selection,{mode:"multiple"}),(0,R.jsx)(w.Export,{enabled:!0,fileName:"Request",allowExportSelectedData:!0}),(0,R.jsx)(w.Paging,{defaultPageSize:5}),(0,R.jsx)(w.FilterRow,{visible:x.showFilterRow,applyFilter:x.currentFilter}),(0,R.jsx)(w.HeaderFilter,{visible:x.showHeaderFilter}),(0,R.jsx)(w.Selection,{mode:"single"}),(0,R.jsx)(w.SearchPanel,{visible:!0,width:240,placeholder:"Search..."}),(0,R.jsx)(w.Summary,{children:(0,R.jsx)(w.TotalItem,{column:"id_no",summaryType:"count"})})]})})]}),(0,R.jsx)(P,{show:a,reloadPage:g,onHide:function(){return r(!1)}})]})}},72559:function(e,t,a){var r=a(72791),n=a(52007),s=a.n(n),o=["color","size"];function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},l.apply(this,arguments)}function i(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},s=Object.keys(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var c=(0,r.forwardRef)((function(e,t){var a=e.color,n=e.size,s=i(e,o);return r.createElement("svg",l({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:n,height:n,fill:a},s),r.createElement("path",{d:"M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"}))}));c.propTypes={color:s().string,size:s().oneOfType([s().string,s().number])},c.defaultProps={color:"currentColor",size:"1em"},t.Z=c},45736:function(e,t,a){var r=a(1413),n=a(45987),s=a(81694),o=a.n(s),l=a(72791),i=a(10162),c=a(80184),d=["bsPrefix","bg","pill","text","className","as"],u=l.forwardRef((function(e,t){var a=e.bsPrefix,s=e.bg,l=e.pill,u=e.text,p=e.className,f=e.as,h=void 0===f?"span":f,j=(0,n.Z)(e,d),m=(0,i.vE)(a,"badge");return(0,c.jsx)(h,(0,r.Z)((0,r.Z)({ref:t},j),{},{className:o()(p,m,l&&"rounded-pill",u&&"text-".concat(u),s&&"bg-".concat(s))}))}));u.displayName="Badge",u.defaultProps={bg:"primary",pill:!1},t.Z=u}}]);
//# sourceMappingURL=383.a4f8995e.chunk.js.map