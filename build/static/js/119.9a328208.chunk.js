"use strict";(self.webpackChunkSaloon_Portal=self.webpackChunkSaloon_Portal||[]).push([[119],{85119:function(e,a,t){t.r(a),t.d(a,{default:function(){return b}});var r=t(1413),n=t(70885),i=t(72791),s=t(74569),l=t.n(s),d=t(9592),o=t(13855),c=t(89743),u=t(2677),m=t(16157),f=t(2144),h=t(61134),x=(t(25415),t(31418),t(64802),t(30274)),Z=t(80184);var j=t(61265),p=t(65057),v=t(50649),g=t.n(v),_=p.Ry().shape({first_name:p.Z_().required(),middle_name:p.Z_().required(),last_name:p.Z_().required(),email:p.Z_().required(),gender:p.Rx().required(),addres:p.Rx().required()});function y(e){var a=(0,i.useState)([]),t=(0,n.Z)(a,2),s=t[0],f=t[1],p=(0,i.useState)([]),v=(0,n.Z)(p,2),g=v[0],y=v[1];(0,i.useRef)();i.useEffect((function(){}),[]);var b=(0,h.cI)({mode:"onChange",resolver:(0,j.X)(_)}),S=b.register,w=(b.errors,b.handleSubmit),E=(b.watch,b.reset),C=(0,i.useState)(""),N=(0,n.Z)(C,2),F=(N[0],N[1],(0,i.useState)(!1)),q=(0,n.Z)(F,2),P=(q[0],q[1]);return(0,i.useEffect)((function(){l()({method:"GET",url:"/api/get_gender"}).then((function(e){console.log(e.data[0].data),y(e.data[0].data)})).catch((function(e){console.log(e)}))}),[]),(0,i.useEffect)((function(){l()({method:"GET",url:"/api/get_address"}).then((function(e){console.log(e.data[0].data),f(e.data[0].data)})).catch((function(e){console.log(e)}))}),[]),(0,Z.jsxs)(d.Z,(0,r.Z)((0,r.Z)({},e),{},{size:"lg","aria-labelledby":"contained-modal",centered:!0,children:[(0,Z.jsx)(d.Z.Header,{closeButton:!0,children:(0,Z.jsx)(d.Z.Title,{id:"contained-modal",children:e.title})}),(0,Z.jsx)(d.Z.Body,{children:(0,Z.jsxs)(o.Z,{onSubmit:w((function(a){try{var t={first_name:a.first_name,middle_name:a.middle_name,last_name:a.last_name,email:a.email,addres:parseInt(a.addres),gender:parseInt(a.gender)};console.log(t),l().post("/api/add_staff",t,{headers:{"content-Type":"application/json"}}).then((function(a){E(),console.log(a.data[0].data[0]),(a.data[0].data[0].code=111)?(e.reloadPage(),e.onHide(),x.Z.notifySuccess("User was added Succefully")):x.Z.notifyError("failed to add new User")})),P(!0)}catch(r){}})),children:[(0,Z.jsxs)(c.Z,{children:[(0,Z.jsx)(u.Z,{md:6,children:(0,Z.jsxs)(o.Z.Group,{className:"mb-3",controlId:"formBasicEmail",children:[(0,Z.jsx)(o.Z.Label,{children:"First Name"}),(0,Z.jsx)(o.Z.Control,(0,r.Z)((0,r.Z)({type:"text",placeholder:"Enter First Name",name:"first_name"},S("first_name")),{},{required:!0}))]})}),(0,Z.jsx)(u.Z,{md:6,children:(0,Z.jsxs)(o.Z.Group,{className:"mb-3",controlId:"formBasicEmail",children:[(0,Z.jsx)(o.Z.Label,{children:"Middle Name"}),(0,Z.jsx)(o.Z.Control,(0,r.Z)((0,r.Z)({type:"text",placeholder:"Enter Middle Name",name:"middle_name"},S("middle_name")),{},{required:!0}))]})}),(0,Z.jsx)(u.Z,{md:6,children:(0,Z.jsxs)(o.Z.Group,{className:"mb-3",controlId:"formBasicEmail",children:[(0,Z.jsx)(o.Z.Label,{children:"Last Name"}),(0,Z.jsx)(o.Z.Control,(0,r.Z)((0,r.Z)({type:"text",placeholder:"Enter Last Name",name:"last_name"},S("last_name")),{},{required:!0}))]})}),(0,Z.jsx)(u.Z,{md:6,children:(0,Z.jsxs)(o.Z.Group,{className:"mb-3",controlId:"formBasicEmail",children:[(0,Z.jsx)(o.Z.Label,{children:"Staff Email"}),(0,Z.jsx)(o.Z.Control,(0,r.Z)((0,r.Z)({type:"email",placeholder:"Enter email",name:"email"},S("email")),{},{required:!0}))]})}),(0,Z.jsxs)(u.Z,{md:6,children:[(0,Z.jsx)(o.Z.Label,{children:"Gender"}),(0,Z.jsxs)(o.Z.Select,(0,r.Z)((0,r.Z)({"aria-label":"Default select"},S("gender")),{},{required:!0,children:[(0,Z.jsx)("option",{value:"",children:"Choose Gender "}),g.length>0&&g.map((function(e){return(0,Z.jsx)("option",{value:e.gender_id,children:e.gender_name},e.gender_id)}))]}))]}),(0,Z.jsxs)(u.Z,{md:6,children:[(0,Z.jsx)(o.Z.Label,{children:"Address"}),(0,Z.jsxs)(o.Z.Select,(0,r.Z)((0,r.Z)({"aria-label":"Default select example"},S("addres")),{},{required:!0,children:[(0,Z.jsx)("option",{value:"",children:"select Address"}),s.length>0&&s.map((function(e){return(0,Z.jsx)("option",{value:e.address_id,children:e.address_name},e.address_id)}))]}))]})]}),(0,Z.jsxs)(u.Z,{md:12,className:"mt-2",children:[(0,Z.jsx)(m.Z,{onClick:e.onHide,children:"Close"}),(0,Z.jsx)(m.Z,{className:"float-end",type:"submit",children:e.title})]})]})})]}))}y.defaultProps={title:"Add Staff"};var b=function(){var e=i.useState(!1),a=(0,n.Z)(e,2),t=a[0],r=a[1],s=(0,i.useState)([]),d=(0,n.Z)(s,2),o=d[0],c=d[1],u=(0,i.useState)({data:[],showFilterRow:!0,showHeaderFilter:!0,currentFilter:"auto",startDate:new Date,endDate:new Date}),h=(0,n.Z)(u,2),x=h[0];h[1];(0,i.useEffect)((function(){j()}),[]);var j=function(){l()({method:"GET",url:"/api/get_staff"}).then((function(e){console.log(e.data[0].data),c(e.data[0].data)})).catch((function(e){console.log(e)}))};return(0,Z.jsxs)("div",{children:[(0,Z.jsxs)(f.Z,{children:[(0,Z.jsx)(f.Z.Header,{children:(0,Z.jsx)(m.Z,{className:"primary",onClick:function(){return r(!0)},children:"Add Staff"})}),(0,Z.jsx)(f.Z.Body,{children:(0,Z.jsxs)(g(),{ref:function(e){return e},dataSource:o,showRowLines:!0,showBorders:!0,children:[(0,Z.jsx)(v.Column,{dataField:"email",caption:"Email"}),(0,Z.jsx)(v.Column,{dataField:"staff",caption:"Full Name"}),(0,Z.jsx)(v.Column,{dataField:"addres_name",caption:"Address"}),(0,Z.jsx)(v.Column,{dataField:"gender_name",caption:"Gender"}),(0,Z.jsx)(v.Column,{dataField:"role",caption:"Role"}),(0,Z.jsx)(v.ColumnChooser,{enabled:!0}),(0,Z.jsx)(v.Selection,{mode:"multiple"}),(0,Z.jsx)(v.Export,{enabled:!0,fileName:"User",allowExportSelectedData:!0}),(0,Z.jsx)(v.Paging,{defaultPageSize:5}),(0,Z.jsx)(v.FilterRow,{visible:x.showFilterRow,applyFilter:x.currentFilter}),(0,Z.jsx)(v.HeaderFilter,{visible:x.showHeaderFilter}),(0,Z.jsx)(v.Selection,{mode:"single"}),(0,Z.jsx)(v.SearchPanel,{visible:!0,width:240,placeholder:"Search..."}),(0,Z.jsx)(v.Summary,{children:(0,Z.jsx)(v.TotalItem,{column:"id_no",summaryType:"count"})})]})})]}),(0,Z.jsx)(y,{show:t,reloadPage:j,onHide:function(){return r(!1)}})]})}},61265:function(e,a,t){t.d(a,{X:function(){return l}});var r=t(61134),n=function(e,a,t){if(e&&"reportValidity"in e){var n=(0,r.U2)(t,a);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},i=function(e,a){var t=function(t){var r=a.fields[t];r&&r.ref&&"reportValidity"in r.ref?n(r.ref,t,e):r.refs&&r.refs.forEach((function(a){return n(a,t,e)}))};for(var r in a.fields)t(r)},s=function(e,a){a.shouldUseNativeValidation&&i(e,a);var t={};for(var n in e){var s=(0,r.U2)(a.fields,n);(0,r.t8)(t,n,Object.assign(e[n],{ref:s&&s.ref}))}return t},l=function(e,a,t){return void 0===a&&(a={}),void 0===t&&(t={}),function(l,d,o){try{return Promise.resolve(function(r,s){try{var c=(a.context,Promise.resolve(e["sync"===t.mode?"validateSync":"validate"](l,Object.assign({abortEarly:!1},a,{context:d}))).then((function(e){return o.shouldUseNativeValidation&&i({},o),{values:t.rawValues?l:e,errors:{}}})))}catch(n){return s(n)}return c&&c.then?c.then(void 0,s):c}(0,(function(e){if(!e.inner)throw e;return{values:{},errors:s((a=e,t=!o.shouldUseNativeValidation&&"all"===o.criteriaMode,(a.inner||[]).reduce((function(e,a){if(e[a.path]||(e[a.path]={message:a.message,type:a.type}),t){var n=e[a.path].types,i=n&&n[a.type];e[a.path]=(0,r.KN)(a.path,t,e,a.type,i?[].concat(i,a.message):a.message)}return e}),{})),o)};var a,t})))}catch(n){return Promise.reject(n)}}}}}]);
//# sourceMappingURL=119.9a328208.chunk.js.map